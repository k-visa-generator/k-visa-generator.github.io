{{- $params := .Site.Params }}
{{- $centerLogo := $params.centerLogo }}
{{ $logo := $params.logo }}
<header class="nav_header" >
  <nav class="nav">
    {{- if $centerLogo }}
      {{- partialCached "logo" (dict "logo" $logo "class" "nav_hide") }}
    {{- else }}
      {{- partialCached "logo" (dict "logo" $logo) }}
    {{- end }}
    <div class='nav_body nav_body_{{ default "left" $params.mobileNavigation }}'>
      {{ $context := . }}
      {{ $menuData := .Site.Data.menu }}
      {{ with $menuData }}
        {{ partial "nav" (dict "context" $context "menu" $menuData) }}
      {{- else }}
        {{ partial "nav" (dict "context" . "menu" .Site.Menus.main) }}
      {{- end }}
      {{ if hugo.IsMultilingual }}
      <div class="nav_item" style="display: flex; align-items: center; padding: 0 10px;">

        <style>
          .lang-select-wrapper {
            position: relative;
            display: inline-block;
          }
          .custom-lang-select {
            appearance: none;           /* 기본 화살표 제거 (Chrome, Safari) */
            -webkit-appearance: none;   /* 기본 화살표 제거 (iOS) */
            -moz-appearance: none;      /* 기본 화살표 제거 (Firefox) */

            background-color: rgba(255, 255, 255, 0.1); /* 반투명 배경 */
            border: 1px solid rgba(255, 255, 255, 0.3); /* 얇은 테두리 */
            color: #ffffff;
            padding: 6px 30px 6px 12px; /* 오른쪽 여백은 화살표 자리 */
            border-radius: 20px;        /* 둥근 캡슐 모양 */
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;

            /* 커스텀 화살표 아이콘 (SVG) */
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 14px;
          }

          /* 마우스 올렸을 때 */
          .custom-lang-select:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.6);
          }

          /* 포커스 잡혔을 때 (접근성) */
          .custom-lang-select:focus {
            outline: none;
            border-color: #ffffff;
          }

          /* 드롭다운 옵션 스타일 (펼쳤을 때는 가독성 위해 흰 배경) */
          .custom-lang-select option {
            background-color: #ffffff;
            color: #333333;
            padding: 10px;
          }
        </style>

        <div class="lang-select-wrapper">
          <select class="custom-lang-select" onchange="location = this.value;">
              {{ range .Site.Home.AllTranslations }}
                  {{ $url := .Permalink }}
                  {{ $lang := .Language }}

                  {{/* 현재 페이지의 번역본 찾기 */}}
                  {{ range $.AllTranslations }}
                      {{ if eq .Language.Lang $lang.Lang }}
                          {{ $url = .Permalink }}
                      {{ end }}
                  {{ end }}

                  <option value="{{ $url }}" {{ if eq $lang.Lang $.Language.Lang }}selected{{ end }}>
                      {{ $lang.LanguageName }}
                  </option>
              {{ end }}
          </select>
        </div>

      </div>
      {{- end }}
      {{- if $centerLogo }}
        {{- partial "logo" (dict "logo" $logo "class" "nav_center") }}
      {{- end }}
      {{- partialCached "follow" . }}
    </div>
  </nav>
</header>
